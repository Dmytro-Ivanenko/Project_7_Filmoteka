function a(a){return a&&a.__esModule?a.default:a}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},d={},n=e.parcelRequired7c6;null==n&&((n=function(a){if(a in t)return t[a].exports;if(a in d){var e=d[a];delete d[a];var n={id:a,exports:{}};return t[a]=n,e.call(n.exports,n,n.exports),n.exports}var o=new Error("Cannot find module '"+a+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(a,e){d[a]=e},e.parcelRequired7c6=n),n("jw9fa"),n("bMZn5"),n("k601f");var o=n("ftYLF"),l=n("eWCmQ"),r=n("eyjy7"),s=n("bMZn5"),c=n("4iZdw");const i=document.querySelector(".watched-btn"),u=document.querySelector(".queue-btn"),m=document.querySelector(".gallery");let _;async function b(){s.auth.currentUser?(_="watched",i.classList.add("watched-btn_current"),u.classList.remove("queue-btn_current"),m.innerHTML="",(0,o.onSnapshot)((0,o.doc)(s.db,"users",s.auth.currentUser.uid),(a=>{const{watchedMovies:e}=a.data();let t;console.log(e),t="#ua"===window.location.hash?e.ua.map(c.createMarkupElemetsGallery).join(""):e.en.map(c.createMarkupElemetsGallery).join(""),m.innerHTML=t}))):"#ua"===window.location.hash?a(l).Notify.failure("Будь ласка, авторизуйтесь"):a(l).Notify.failure("Please sign in")}i.addEventListener("click",b),u.addEventListener("click",(async function(){if(!s.auth.currentUser)return void("#ua"===window.location.hash?a(l).Notify.failure("Будь ласка, авторизуйтесь"):a(l).Notify.failure("Please sign in"));_="queue",i.classList.remove("watched-btn_current"),u.classList.add("queue-btn_current"),m.innerHTML="",(0,o.onSnapshot)((0,o.doc)(s.db,"users",s.auth.currentUser.uid),(a=>{const{queuedMovies:e}=a.data();let t;console.log(e),t="#ua"===window.location.hash?e.ua.map(c.createMarkupElemetsGallery).join(""):e.en.map(c.createMarkupElemetsGallery).join(""),m.innerHTML=t}))})),(0,r.onAuthStateChanged)(s.auth,(a=>{a?(console.log("user logged in: ",a),s.authSignOut.parentElement.classList.remove("visually-hidden"),s.authFormOpen.parentElement.classList.add("visually-hidden"),b()):(console.log("user logged out"),s.authSignOut.parentElement.classList.add("visually-hidden"),s.authFormOpen.parentElement.classList.remove("visually-hidden"))}));s=n("bMZn5"),o=n("ftYLF"),l=n("eWCmQ");function v(a){const{title:e,poster_path:t,genres:d,vote_average:n,vote_count:o,popularity:l,original_title:r,overview:s}=a;return`\n      <div class="modal">\n          <div class="modal-card">\n              <button class="modal__btn-close" data-modal-close>\n              <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"\n              class="modal__icon-close"\n              width="24" height="24"\n              viewBox="0 0 24 24">\n              <path d="M 4.7070312 3.2929688 L 3.2929688 4.7070312 L 10.585938 12 L 3.2929688 19.292969 L 4.7070312 20.707031 L 12 13.414062 L 19.292969 20.707031 L 20.707031 19.292969 L 13.414062 12 L 20.707031 4.7070312 L 19.292969 3.2929688 L 12 10.585938 L 4.7070312 3.2929688 z"></path>\n              </svg>\n              </button>\n              <div class="modal-card__images">\n                  <img\n                  class="modal-card__image"\n                  src="https://image.tmdb.org/t/p/w1280/${t}"\n                  alt="Title"\n                  />\n              </div>\n              <div class="modal-card__description">\n                  <h2 class="modal-card__title">${e}</h2>\n                  <table class="modal-card__table">\n                  <tbody>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Vote / Votes</td>\n                      <td class="modal-card__table-data"><span>${n}</span> / ${o}</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Popularity</td>\n                      <td class="modal-card__table-data">${l}</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Original Title</td>\n                      <td class="modal-card__table-data">${r}</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Genre</td>\n                      <td class="modal-card__table-data">${d.map((a=>a.name)).join(", ")}</td>\n                      </tr>\n                  </tbody>\n                  </table>\n                  <p class="modal-card__about lng-about">About</p>\n                  <p class="modal-card__about-description">${s}</p>\n                  <div class="modal-card__btn">\n                    <button class="modal-card__btn-watched lng-removewatched modal-card__btn-watched_active" data-watched-remove>remove from watched</button>\n                </div>\n              </div>\n          </div>\n      </div>\n  `}function h(a){const{title:e,poster_path:t,genres:d,vote_average:n,vote_count:o,popularity:l,original_title:r,overview:s}=a;return`\n      <div class="modal">\n          <div class="modal-card">\n              <button class="modal__btn-close" data-modal-close>\n              <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"\n              class="modal__icon-close"\n              width="24" height="24"\n              viewBox="0 0 24 24">\n              <path d="M 4.7070312 3.2929688 L 3.2929688 4.7070312 L 10.585938 12 L 3.2929688 19.292969 L 4.7070312 20.707031 L 12 13.414062 L 19.292969 20.707031 L 20.707031 19.292969 L 13.414062 12 L 20.707031 4.7070312 L 19.292969 3.2929688 L 12 10.585938 L 4.7070312 3.2929688 z"></path>\n              </svg>\n              </button>\n              <div class="modal-card__images">\n                  <img\n                  class="modal-card__image"\n                  src="https://image.tmdb.org/t/p/w1280/${t}"\n                  alt="Title"\n                  />\n              </div>\n              <div class="modal-card__description">\n                  <h2 class="modal-card__title">${e}</h2>\n                  <table class="modal-card__table">\n                  <tbody>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Vote / Votes</td>\n                      <td class="modal-card__table-data"><span>${n}</span> / ${o}</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Popularity</td>\n                      <td class="modal-card__table-data">${l}</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Original Title</td>\n                      <td class="modal-card__table-data">${r}</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Genre</td>\n                      <td class="modal-card__table-data">${d.map((a=>a.name)).join(", ")}</td>\n                      </tr>\n                  </tbody>\n                  </table>\n                  <p class="modal-card__about lng-about">About</p>\n                  <p class="modal-card__about-description">${s}</p>\n                  <div class="modal-card__btn">\n                    <button class="modal-card__btn-queue lng-removequeued modal-card__btn-queue_active" data-queue-remove>remove from queue</button>\n                </div>\n              </div>\n          </div>\n      </div>\n  `}var g=n("k601f");let p,w,y,f;const L=document.querySelector(".backdrop"),M=document.querySelector("[data-modal]");function k(a){L.style.backgroundImage=`url("https://image.tmdb.org/t/p/original/${a.backdrop_path}`,L.style.backgroundSize="cover",L.style.backgroundPosition="50% 50%"}async function q(){const{queuedMovies:e}=await(0,o.getDoc)((0,o.doc)(s.db,"users",s.auth.currentUser.uid)).then((a=>a.data()));e.ua=e.ua.filter((a=>a.id!==f.id)),e.en=e.en.filter((a=>a.id!==f.id)),await(0,o.updateDoc)((0,o.doc)(s.db,"users",s.auth.currentUser.uid),{queuedMovies:e}).then((()=>{"#ua"===window.location.hash?a(l).Notify.success("Успішно видалено"):a(l).Notify.success("Removed successfully"),$()}))}async function E(){const{watchedMovies:e}=await(0,o.getDoc)((0,o.doc)(s.db,"users",s.auth.currentUser.uid)).then((a=>a.data()));e.ua=e.ua.filter((a=>a.id!==f.id)),e.en=e.en.filter((a=>a.id!==f.id)),await(0,o.updateDoc)((0,o.doc)(s.db,"users",s.auth.currentUser.uid),{watchedMovies:e}).then((()=>{"#ua"===window.location.hash?a(l).Notify.success("Успішно видалено"):a(l).Notify.success("Removed successfully"),$()}))}function $(){L.classList.add("is-hidden"),window.removeEventListener("keydown",x),y.removeEventListener("click",$),L.removeEventListener("click",T),p?p.removeEventListener("click",E):w.removeEventListener("click",q)}function x(a){"Escape"===a.code&&$()}function T(a){a.target===a.currentTarget&&$()}m.addEventListener("click",(async function(e){if(e.target===e.currentTarget)return;const t=e.target.closest(".photo-card"),d=Number(t.dataset.id);if("watched"===_)try{const{watchedMovies:a}=await(0,o.getDoc)((0,o.doc)(s.db,"users",s.auth.currentUser.uid)).then((a=>a.data()));f="#ua"===window.location.hash?a.ua.find((a=>a.id===d)):a.en.find((a=>a.id===d)),console.log(f),k(f),M.innerHTML=v(f),p=document.querySelector("[data-watched-remove]"),p.addEventListener("click",E)}catch(e){a(l).Notify.failure(e.message)}else try{const{queuedMovies:a}=await(0,o.getDoc)((0,o.doc)(s.db,"users",s.auth.currentUser.uid)).then((a=>a.data()));f="#ua"===window.location.hash?a.ua.find((a=>a.id===d)):a.en.find((a=>a.id===d)),console.log(f),k(f),M.innerHTML=h(f),w=document.querySelector("[data-queue-remove]"),w.addEventListener("click",q)}catch(e){a(l).Notify.failure(e.message)}(0,g.changeLanguage)(),y=document.querySelector("[data-modal-close]"),y.addEventListener("click",$),L.addEventListener("click",T),window.addEventListener("keydown",x),M.classList.remove("is-hidden")}));
//# sourceMappingURL=library.7483f833.js.map
