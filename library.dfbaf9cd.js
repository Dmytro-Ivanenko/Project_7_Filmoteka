!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},n={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in a)return a[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return a[e]=r,t.call(r.exports,r,r.exports),r.exports}var c=new Error("Cannot find module '"+e+"'");throw c.code="MODULE_NOT_FOUND",c}).register=function(e,t){n[e]=t},t.parcelRequired7c6=r),r("7eZkt"),r("euqRf"),r("ajO7K");var c,d=r("bpxeT"),o=r("2TvXO"),s=r("6m2hf"),l=r("iU1Pc"),i=r("gQOBw"),u=r("euqRf"),m=r("8ptzx"),_=r("4Nugj"),p=document.querySelector(".watched-btn"),v=document.querySelector(".queue-btn"),f=document.querySelector(".gallery");function h(){return b.apply(this,arguments)}function b(){return(b=e(d)(e(o).mark((function t(){return e(o).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u.auth.currentUser){t.next=3;break}return"#ua"===window.location.hash?e(l).Notify.failure("Будь ласка, авторизуйтесь"):e(l).Notify.failure("Please sign in"),t.abrupt("return");case 3:c="watched",p.classList.add("watched-btn_current"),v.classList.remove("queue-btn_current"),f.innerHTML="",w();case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(){return(g=e(d)(e(o).mark((function t(){return e(o).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u.auth.currentUser){t.next=3;break}return"#ua"===window.location.hash?e(l).Notify.failure("Будь ласка, авторизуйтесь"):e(l).Notify.failure("Please sign in"),t.abrupt("return");case 3:c="queue",p.classList.remove("watched-btn_current"),v.classList.add("queue-btn_current"),f.innerHTML="",y();case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(){(0,s.onSnapshot)((0,s.doc)(u.db,"users",u.auth.currentUser.uid),(function(e){var t,a=e.data().watchedMovies;console.log(a),t="#ua"===window.location.hash?a.ua.map(m.createMarkupElemetsGallery).join(""):a.en.map(m.createMarkupElemetsGallery).join(""),f.innerHTML=t}))}function y(){(0,s.onSnapshot)((0,s.doc)(u.db,"users",u.auth.currentUser.uid),(function(e){var t,a=e.data().queuedMovies;console.log(a),t="#ua"===window.location.hash?a.ua.map(m.createMarkupElemetsGallery).join(""):a.en.map(m.createMarkupElemetsGallery).join(""),f.innerHTML=t}))}p.addEventListener("click",h),v.addEventListener("click",(function(){return g.apply(this,arguments)})),(0,i.onAuthStateChanged)(u.auth,(function(e){e?(console.log("user logged in: ",e),u.authSignOut.parentElement.classList.remove("visually-hidden"),u.authFormOpen.parentElement.classList.add("visually-hidden"),h()):(console.log("user logged out"),u.authSignOut.parentElement.classList.add("visually-hidden"),u.authFormOpen.parentElement.classList.remove("visually-hidden")),_.refs.siteNav.classList.remove("visually-hidden")}));d=r("bpxeT"),o=r("2TvXO"),u=r("euqRf"),s=r("6m2hf"),l=r("iU1Pc");function L(e){var t=e.title,a=e.poster_path,n=e.genres,r=e.vote_average,c=e.vote_count,d=e.popularity,o=e.original_title,s=e.overview,l=n.map((function(e){return e.name})).join(", ");return'\n      <div class="modal">\n          <div class="modal-card">\n              <button class="modal__btn-close" data-modal-close>\n              <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"\n              class="modal__icon-close"\n              width="24" height="24"\n              viewBox="0 0 24 24">\n              <path d="M 4.7070312 3.2929688 L 3.2929688 4.7070312 L 10.585938 12 L 3.2929688 19.292969 L 4.7070312 20.707031 L 12 13.414062 L 19.292969 20.707031 L 20.707031 19.292969 L 13.414062 12 L 20.707031 4.7070312 L 19.292969 3.2929688 L 12 10.585938 L 4.7070312 3.2929688 z"></path>\n              </svg>\n              </button>\n              <div class="modal-card__images">\n                  <img\n                  class="modal-card__image"\n                  src="https://image.tmdb.org/t/p/w1280/'.concat(a,'"\n                  alt="Title"\n                  />\n              </div>\n              <div class="modal-card__description">\n                  <h2 class="modal-card__title">').concat(t,'</h2>\n                  <table class="modal-card__table">\n                  <tbody>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Vote / Votes</td>\n                      <td class="modal-card__table-data"><span>').concat(r,"</span> / ").concat(c,'</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Popularity</td>\n                      <td class="modal-card__table-data">').concat(d,'</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Original Title</td>\n                      <td class="modal-card__table-data">').concat(o,'</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Genre</td>\n                      <td class="modal-card__table-data">').concat(l,'</td>\n                      </tr>\n                  </tbody>\n                  </table>\n                  <p class="modal-card__about lng-about">About</p>\n                  <p class="modal-card__about-description">').concat(s,'</p>\n                  <div class="modal-card__btn">\n                    <button class="modal-card__btn-watched lng-removewatched modal-card__btn-watched_active" data-watched-remove>remove from watched</button>\n                </div>\n              </div>\n          </div>\n      </div>\n  ')}function x(e){var t=e.title,a=e.poster_path,n=e.genres,r=e.vote_average,c=e.vote_count,d=e.popularity,o=e.original_title,s=e.overview,l=n.map((function(e){return e.name})).join(", ");return'\n      <div class="modal">\n          <div class="modal-card">\n              <button class="modal__btn-close" data-modal-close>\n              <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"\n              class="modal__icon-close"\n              width="24" height="24"\n              viewBox="0 0 24 24">\n              <path d="M 4.7070312 3.2929688 L 3.2929688 4.7070312 L 10.585938 12 L 3.2929688 19.292969 L 4.7070312 20.707031 L 12 13.414062 L 19.292969 20.707031 L 20.707031 19.292969 L 13.414062 12 L 20.707031 4.7070312 L 19.292969 3.2929688 L 12 10.585938 L 4.7070312 3.2929688 z"></path>\n              </svg>\n              </button>\n              <div class="modal-card__images">\n                  <img\n                  class="modal-card__image"\n                  src="https://image.tmdb.org/t/p/w1280/'.concat(a,'"\n                  alt="Title"\n                  />\n              </div>\n              <div class="modal-card__description">\n                  <h2 class="modal-card__title">').concat(t,'</h2>\n                  <table class="modal-card__table">\n                  <tbody>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Vote / Votes</td>\n                      <td class="modal-card__table-data"><span>').concat(r,"</span> / ").concat(c,'</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Popularity</td>\n                      <td class="modal-card__table-data">').concat(d,'</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Original Title</td>\n                      <td class="modal-card__table-data">').concat(o,'</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Genre</td>\n                      <td class="modal-card__table-data">').concat(l,'</td>\n                      </tr>\n                  </tbody>\n                  </table>\n                  <p class="modal-card__about lng-about">About</p>\n                  <p class="modal-card__about-description">').concat(s,'</p>\n                  <div class="modal-card__btn">\n                    <button class="modal-card__btn-queue lng-removequeued modal-card__btn-queue_active" data-queue-remove>remove from queue</button>\n                </div>\n              </div>\n          </div>\n      </div>\n  ')}var k,q,E,M,T=r("ajO7K"),N=document.querySelector(".backdrop"),O=document.querySelector("[data-modal]");function S(){return(S=e(d)(e(o).mark((function t(a){var n,r,d,i;return e(o).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.target!==a.currentTarget){t.next=2;break}return t.abrupt("return");case 2:if(n=a.target.closest(".photo-card"),r=Number(n.dataset.id),"watched"!==c){t.next=21;break}return t.prev=5,t.next=8,(0,s.getDoc)((0,s.doc)(u.db,"users",u.auth.currentUser.uid)).then((function(e){return e.data()}));case 8:d=t.sent.watchedMovies,M="#ua"===window.location.hash?d.ua.find((function(e){return e.id===r})):d.en.find((function(e){return e.id===r})),console.log(M),U(M),O.innerHTML=L(M),j(),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(5),e(l).Notify.failure(t.t0.message);case 19:t.next=35;break;case 21:return t.prev=21,t.next=24,(0,s.getDoc)((0,s.doc)(u.db,"users",u.auth.currentUser.uid)).then((function(e){return e.data()}));case 24:i=t.sent.queuedMovies,M="#ua"===window.location.hash?i.ua.find((function(e){return e.id===r})):i.en.find((function(e){return e.id===r})),console.log(M),U(M),O.innerHTML=x(M),D(),t.next=35;break;case 32:t.prev=32,t.t1=t.catch(21),e(l).Notify.failure(t.t1.message);case 35:(0,T.changeLanguage)(),(E=document.querySelector("[data-modal-close]")).addEventListener("click",z),N.addEventListener("click",A),window.addEventListener("keydown",V),O.classList.remove("is-hidden");case 41:case"end":return t.stop()}}),t,null,[[5,16],[21,32]])})))).apply(this,arguments)}function U(e){N.style.backgroundImage='url("https://image.tmdb.org/t/p/original/'.concat(e.backdrop_path),N.style.backgroundSize="cover",N.style.backgroundPosition="50% 50%"}function j(){(k=document.querySelector("[data-watched-remove]")).addEventListener("click",G)}function D(){(q=document.querySelector("[data-queue-remove]")).addEventListener("click",P)}function P(){return R.apply(this,arguments)}function R(){return(R=e(d)(e(o).mark((function t(){var a;return e(o).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.getDoc)((0,s.doc)(u.db,"users",u.auth.currentUser.uid)).then((function(e){return e.data()}));case 2:return(a=t.sent.queuedMovies).ua=a.ua.filter((function(e){return e.id!==M.id})),a.en=a.en.filter((function(e){return e.id!==M.id})),t.next=7,(0,s.updateDoc)((0,s.doc)(u.db,"users",u.auth.currentUser.uid),{queuedMovies:a}).then((function(){"#ua"===window.location.hash?e(l).Notify.success("Успішно видалено"):e(l).Notify.success("Removed successfully"),z()}));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function G(){return H.apply(this,arguments)}function H(){return(H=e(d)(e(o).mark((function t(){var a;return e(o).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.getDoc)((0,s.doc)(u.db,"users",u.auth.currentUser.uid)).then((function(e){return e.data()}));case 2:return(a=t.sent.watchedMovies).ua=a.ua.filter((function(e){return e.id!==M.id})),a.en=a.en.filter((function(e){return e.id!==M.id})),t.next=7,(0,s.updateDoc)((0,s.doc)(u.db,"users",u.auth.currentUser.uid),{watchedMovies:a}).then((function(){"#ua"===window.location.hash?e(l).Notify.success("Успішно видалено"):e(l).Notify.success("Removed successfully"),z()}));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function z(){N.classList.add("is-hidden"),window.removeEventListener("keydown",V),E.removeEventListener("click",z),N.removeEventListener("click",A),k?k.removeEventListener("click",G):q.removeEventListener("click",P)}function V(e){"Escape"===e.code&&z()}function A(e){e.target===e.currentTarget&&z()}f.addEventListener("click",(function(e){return S.apply(this,arguments)}))}();
//# sourceMappingURL=library.dfbaf9cd.js.map
