!function(){function a(a,t,e,n){Object.defineProperty(a,t,{get:e,set:n,enumerable:!0,configurable:!0})}function t(a){return a&&a.__esModule?a.default:a}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},d=e.parcelRequired7c6;null==d&&((d=function(a){if(a in n)return n[a].exports;if(a in r){var t=r[a];delete r[a];var e={id:a,exports:{}};return n[a]=e,t.call(e.exports,e,e.exports),e.exports}var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}).register=function(a,t){r[a]=t},e.parcelRequired7c6=d),d.register("iE7OH",(function(t,e){var n,r;a(t.exports,"register",(function(){return n}),(function(a){return n=a})),a(t.exports,"resolve",(function(){return r}),(function(a){return r=a}));var d={};n=function(a){for(var t=Object.keys(a),e=0;e<t.length;e++)d[t[e]]=a[t[e]]},r=function(a){var t=d[a];if(null==t)throw new Error("Could not resolve bundle with id "+a);return t}})),d.register("aNJCr",(function(t,e){var n;a(t.exports,"getBundleURL",(function(){return n}),(function(a){return n=a}));var r={};function d(a){return(""+a).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}n=function(a){var t=r[a];return t||(t=function(){try{throw new Error}catch(t){var a=(""+t.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\/\/[^)\n]+/g);if(a)return d(a[2])}return"/"}(),r[a]=t),t}})),d("iE7OH").register(JSON.parse('{"2Y0K8":"library.36a9e522.js","6aran":"library-placeholder.e58e946c.jpg","7mVsD":"index.d7eac447.css","7nwxg":"library.b8fbba49.js"}')),d("hkYMn"),d("7eZkt"),d("euqRf"),d("ajO7K");var c,o=d("bpxeT"),l=d("2TvXO"),s=d("6m2hf"),i=d("iU1Pc"),u=d("gQOBw"),_=d("euqRf"),m=d("8ptzx"),p=d("4Nugj");function b(){return"#ua"===window.location.hash?'\n            <div class="placeholder">\n            <img\n              src="'.concat(t(c),'"\n              alt="empty field"\n              class="placeholder__img"\n              width="600px"\n              height="450px"\n            />\n            <p class="placeholder__text">\n                Спробуйте додати фільми в вашу колекцію.\n            </p>\n            </div>\n            '):'\n            <div class="placeholder">\n            <img\n              src="'.concat(t(c),'"\n              alt="empty field"\n              class="placeholder__img"\n              width="600px"\n              height="450px"\n            />\n            <p class="placeholder__text">\n                Try adding movies to your library.\n            </p>\n            </div>\n            ')}c=d("aNJCr").getBundleURL("2Y0K8")+d("iE7OH").resolve("6aran");var h,v=document.querySelector(".watched-btn"),g=document.querySelector(".queue-btn"),f=document.querySelector(".gallery");function w(){return y.apply(this,arguments)}function y(){return(y=t(o)(t(l).mark((function a(){return t(l).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(_.auth.currentUser){a.next=3;break}return"#ua"===window.location.hash?t(i).Notify.failure("Будь ласка, авторизуйтесь"):t(i).Notify.failure("Please sign in"),a.abrupt("return");case 3:h="watched",localStorage.setItem("section",h),v.classList.add("watched-btn_current"),g.classList.remove("queue-btn_current"),f.innerHTML="",k();case 9:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function L(){return x.apply(this,arguments)}function x(){return(x=t(o)(t(l).mark((function a(){return t(l).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(_.auth.currentUser){a.next=3;break}return"#ua"===window.location.hash?t(i).Notify.failure("Будь ласка, авторизуйтесь"):t(i).Notify.failure("Please sign in"),a.abrupt("return");case 3:h="queue",localStorage.setItem("section",h),v.classList.remove("watched-btn_current"),g.classList.add("queue-btn_current"),f.innerHTML="",E();case 9:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function k(){(0,s.onSnapshot)((0,s.doc)(_.db,"users",_.auth.currentUser.uid),(function(a){var t,e=a.data().watchedMovies;console.log(e),t="#ua"===window.location.hash?0===e.ua.length?b():e.ua.map(m.createMarkupElemetsGallery).join(""):0===e.en.length?b():e.en.map(m.createMarkupElemetsGallery).join(""),f.innerHTML=t}))}function E(){(0,s.onSnapshot)((0,s.doc)(_.db,"users",_.auth.currentUser.uid),(function(a){var t,e=a.data().queuedMovies;console.log(e),t="#ua"===window.location.hash?0===e.ua.length?b():e.ua.map(m.createMarkupElemetsGallery).join(""):0===e.en.length?b():e.en.map(m.createMarkupElemetsGallery).join(""),f.innerHTML=t}))}v.addEventListener("click",w),g.addEventListener("click",L),(0,u.onAuthStateChanged)(_.auth,(function(a){a?(console.log("user logged in: ",a),_.authSignOut.parentElement.classList.remove("visually-hidden"),_.authFormOpen.parentElement.classList.add("visually-hidden"),"queue"===localStorage.getItem("section")?L():w()):(console.log("user logged out"),_.authSignOut.parentElement.classList.add("visually-hidden"),_.authFormOpen.parentElement.classList.remove("visually-hidden"),f.innerHTML="#ua"===window.location.hash?'\n        <div class="placeholder">\n        <img\n          src="'.concat(t(c),'"\n          alt="empty field"\n          class="placeholder__img"\n          width="600px"\n          height="450px"\n        />\n        <p class="placeholder__text">\n            Тут нічого немає... Авторизуйтесь щоб користуватися бібліотекою.\n        </p>\n        </div>\n        '):'\n        <div class="placeholder">\n        <img\n          src="'.concat(t(c),'"\n          alt="empty field"\n          class="placeholder__img"\n          width="600px"\n          height="450px"\n        />\n        <p class="placeholder__text">\n            Nothing to see here... Try signing in to use your library.\n        </p>\n        </div>\n        ')),p.refs.siteNav.classList.remove("visually-hidden")}));var q,M,T,S;o=d("bpxeT"),l=d("2TvXO"),_=d("euqRf"),s=d("6m2hf"),i=d("iU1Pc");function O(a){if("#ua"===window.location.hash){var t=a.title,e=a.poster_path,n=a.genres,r=a.vote_average,d=a.vote_count,c=a.popularity,o=a.original_title,l=a.overview,s=n.map((function(a){return a.name})).join(", ");return'\n      <div class="modal">\n          <div class="modal-card">\n              <button class="modal__btn-close" data-modal-close>\n              <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"\n              class="modal__icon-close"\n              width="24" height="24"\n              viewBox="0 0 24 24">\n              <path d="M 4.7070312 3.2929688 L 3.2929688 4.7070312 L 10.585938 12 L 3.2929688 19.292969 L 4.7070312 20.707031 L 12 13.414062 L 19.292969 20.707031 L 20.707031 19.292969 L 13.414062 12 L 20.707031 4.7070312 L 19.292969 3.2929688 L 12 10.585938 L 4.7070312 3.2929688 z"></path>\n              </svg>\n              </button>\n              <div class="modal-card__images">\n                  <img\n                  class="modal-card__image"\n                  src="https://image.tmdb.org/t/p/w1280/'.concat(e,'"\n                  alt="Title"\n                  />\n              </div>\n              <div class="modal-card__description">\n                  <h2 class="modal-card__title">').concat(t,'</h2>\n                  <table class="modal-card__table">\n                  <tbody>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Vote / Votes</td>\n                      <td class="modal-card__table-data"><span>').concat(r,"</span> / ").concat(d,'</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Popularity</td>\n                      <td class="modal-card__table-data">').concat(c,'</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Original Title</td>\n                      <td class="modal-card__table-data">').concat(o,'</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Genre</td>\n                      <td class="modal-card__table-data">').concat(s,'</td>\n                      </tr>\n                  </tbody>\n                  </table>\n                  <p class="modal-card__about lng-about">КОРОТКИЙ ОПИС ФІЛЬМУ</p>\n                  <p class="modal-card__about-description">').concat(l,'</p>\n                  <div class="modal-card__btn">\n                    <button class="modal-card__btn-watched lng-watched modal-card__btn-watched_active" data-watched-remove>видалити з перегляду</button>\n                </div>\n              </div>\n          </div>\n      </div>\n  ')}var i=a.title,u=a.poster_path,_=a.genres,m=a.vote_average,p=a.vote_count,b=a.popularity,h=a.original_title,v=a.overview,g=_.map((function(a){return a.name})).join(", ");return'\n      <div class="modal">\n          <div class="modal-card">\n              <button class="modal__btn-close" data-modal-close>\n              <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"\n              class="modal__icon-close"\n              width="24" height="24"\n              viewBox="0 0 24 24">\n              <path d="M 4.7070312 3.2929688 L 3.2929688 4.7070312 L 10.585938 12 L 3.2929688 19.292969 L 4.7070312 20.707031 L 12 13.414062 L 19.292969 20.707031 L 20.707031 19.292969 L 13.414062 12 L 20.707031 4.7070312 L 19.292969 3.2929688 L 12 10.585938 L 4.7070312 3.2929688 z"></path>\n              </svg>\n              </button>\n              <div class="modal-card__images">\n                  <img\n                  class="modal-card__image"\n                  src="https://image.tmdb.org/t/p/w1280/'.concat(u,'"\n                  alt="Title"\n                  />\n              </div>\n              <div class="modal-card__description">\n                  <h2 class="modal-card__title">').concat(i,'</h2>\n                  <table class="modal-card__table">\n                  <tbody>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Vote / Votes</td>\n                      <td class="modal-card__table-data"><span>').concat(m,"</span> / ").concat(p,'</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Popularity</td>\n                      <td class="modal-card__table-data">').concat(b,'</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Original Title</td>\n                      <td class="modal-card__table-data">').concat(h,'</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Genre</td>\n                      <td class="modal-card__table-data">').concat(g,'</td>\n                      </tr>\n                  </tbody>\n                  </table>\n                  <p class="modal-card__about lng-about">About</p>\n                  <p class="modal-card__about-description">').concat(v,'</p>\n                  <div class="modal-card__btn">\n                    <button class="modal-card__btn-watched lng-removewatched modal-card__btn-watched_active" data-watched-remove>remove from watched</button>\n                </div>\n              </div>\n          </div>\n      </div>\n  ')}function N(a){if("#ua"===window.location.hash){var t=a.title,e=a.poster_path,n=a.genres,r=a.vote_average,d=a.vote_count,c=a.popularity,o=a.original_title,l=a.overview,s=n.map((function(a){return a.name})).join(", ");return'\n      <div class="modal">\n          <div class="modal-card">\n              <button class="modal__btn-close" data-modal-close>\n              <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"\n              class="modal__icon-close"\n              width="24" height="24"\n              viewBox="0 0 24 24">\n              <path d="M 4.7070312 3.2929688 L 3.2929688 4.7070312 L 10.585938 12 L 3.2929688 19.292969 L 4.7070312 20.707031 L 12 13.414062 L 19.292969 20.707031 L 20.707031 19.292969 L 13.414062 12 L 20.707031 4.7070312 L 19.292969 3.2929688 L 12 10.585938 L 4.7070312 3.2929688 z"></path>\n              </svg>\n              </button>\n              <div class="modal-card__images">\n                  <img\n                  class="modal-card__image"\n                  src="https://image.tmdb.org/t/p/w1280/'.concat(e,'"\n                  alt="Title"\n                  />\n              </div>\n              <div class="modal-card__description">\n                  <h2 class="modal-card__title">').concat(t,'</h2>\n                  <table class="modal-card__table">\n                  <tbody>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Vote / Votes</td>\n                      <td class="modal-card__table-data"><span>').concat(r,"</span> / ").concat(d,'</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Popularity</td>\n                      <td class="modal-card__table-data">').concat(c,'</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Original Title</td>\n                      <td class="modal-card__table-data">').concat(o,'</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Genre</td>\n                      <td class="modal-card__table-data">').concat(s,'</td>\n                      </tr>\n                  </tbody>\n                  </table>\n                  <p class="modal-card__about lng-about">КОРОТКИЙ ОПИС ФІЛЬМУ</p>\n                  <p class="modal-card__about-description">').concat(l,'</p>\n                  <div class="modal-card__btn">\n                    <button class="modal-card__btn-queue lng-queue modal-card__btn-queue_active" data-queue-remove>видалити з черги</button>\n                </div>\n              </div>\n          </div>\n      </div>\n  ')}var i=a.title,u=a.poster_path,_=a.genres,m=a.vote_average,p=a.vote_count,b=a.popularity,h=a.original_title,v=a.overview,g=_.map((function(a){return a.name})).join(", ");return'\n      <div class="modal">\n          <div class="modal-card">\n              <button class="modal__btn-close" data-modal-close>\n              <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"\n              class="modal__icon-close"\n              width="24" height="24"\n              viewBox="0 0 24 24">\n              <path d="M 4.7070312 3.2929688 L 3.2929688 4.7070312 L 10.585938 12 L 3.2929688 19.292969 L 4.7070312 20.707031 L 12 13.414062 L 19.292969 20.707031 L 20.707031 19.292969 L 13.414062 12 L 20.707031 4.7070312 L 19.292969 3.2929688 L 12 10.585938 L 4.7070312 3.2929688 z"></path>\n              </svg>\n              </button>\n              <div class="modal-card__images">\n                  <img\n                  class="modal-card__image"\n                  src="https://image.tmdb.org/t/p/w1280/'.concat(u,'"\n                  alt="Title"\n                  />\n              </div>\n              <div class="modal-card__description">\n                  <h2 class="modal-card__title">').concat(i,'</h2>\n                  <table class="modal-card__table">\n                  <tbody>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Vote / Votes</td>\n                      <td class="modal-card__table-data"><span>').concat(m,"</span> / ").concat(p,'</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Popularity</td>\n                      <td class="modal-card__table-data">').concat(b,'</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Original Title</td>\n                      <td class="modal-card__table-data">').concat(h,'</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Genre</td>\n                      <td class="modal-card__table-data">').concat(g,'</td>\n                      </tr>\n                  </tbody>\n                  </table>\n                  <p class="modal-card__about lng-about">About</p>\n                  <p class="modal-card__about-description">').concat(v,'</p>\n                  <div class="modal-card__btn">\n                    <button class="modal-card__btn-queue lng-removequeued modal-card__btn-queue_active" data-queue-remove>remove from queue</button>\n                </div>\n              </div>\n          </div>\n      </div>\n  ')}var H=document.querySelector(".backdrop"),U=document.querySelector("[data-modal]");function j(){return(j=t(o)(t(l).mark((function a(e){var n,r,d,c;return t(l).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.target!==e.currentTarget){a.next=2;break}return a.abrupt("return");case 2:if(n=e.target.closest(".photo-card"),r=Number(n.dataset.id),"watched"!==h){a.next=21;break}return a.prev=5,a.next=8,(0,s.getDoc)((0,s.doc)(_.db,"users",_.auth.currentUser.uid)).then((function(a){return a.data()}));case 8:d=a.sent.watchedMovies,S="#ua"===window.location.hash?d.ua.find((function(a){return a.id===r})):d.en.find((function(a){return a.id===r})),console.log(S),R(S),U.innerHTML=O(S),P(),a.next=19;break;case 16:a.prev=16,a.t0=a.catch(5),t(i).Notify.failure(a.t0.message);case 19:a.next=35;break;case 21:return a.prev=21,a.next=24,(0,s.getDoc)((0,s.doc)(_.db,"users",_.auth.currentUser.uid)).then((function(a){return a.data()}));case 24:c=a.sent.queuedMovies,S="#ua"===window.location.hash?c.ua.find((function(a){return a.id===r})):c.en.find((function(a){return a.id===r})),console.log(S),R(S),U.innerHTML=N(S),D(),a.next=35;break;case 32:a.prev=32,a.t1=a.catch(21),t(i).Notify.failure(a.t1.message);case 35:(T=document.querySelector("[data-modal-close]")).addEventListener("click",A),H.addEventListener("click",C),window.addEventListener("keydown",F),U.classList.remove("is-hidden");case 40:case"end":return a.stop()}}),a,null,[[5,16],[21,32]])})))).apply(this,arguments)}function R(a){H.style.backgroundImage='url("https://image.tmdb.org/t/p/original/'.concat(a.backdrop_path),H.style.backgroundSize="cover",H.style.backgroundPosition="50% 50%"}function P(){(q=document.querySelector("[data-watched-remove]")).addEventListener("click",z)}function D(){(M=document.querySelector("[data-queue-remove]")).addEventListener("click",G)}function G(){return V.apply(this,arguments)}function V(){return(V=t(o)(t(l).mark((function a(){var e;return t(l).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,s.getDoc)((0,s.doc)(_.db,"users",_.auth.currentUser.uid)).then((function(a){return a.data()}));case 2:return(e=a.sent.queuedMovies).ua=e.ua.filter((function(a){return a.id!==S.id})),e.en=e.en.filter((function(a){return a.id!==S.id})),a.next=7,(0,s.updateDoc)((0,s.doc)(_.db,"users",_.auth.currentUser.uid),{queuedMovies:e}).then((function(){"#ua"===window.location.hash?t(i).Notify.success("Успішно видалено"):t(i).Notify.success("Removed successfully"),A()}));case 7:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function z(){return B.apply(this,arguments)}function B(){return(B=t(o)(t(l).mark((function a(){var e;return t(l).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,s.getDoc)((0,s.doc)(_.db,"users",_.auth.currentUser.uid)).then((function(a){return a.data()}));case 2:return(e=a.sent.watchedMovies).ua=e.ua.filter((function(a){return a.id!==S.id})),e.en=e.en.filter((function(a){return a.id!==S.id})),a.next=7,(0,s.updateDoc)((0,s.doc)(_.db,"users",_.auth.currentUser.uid),{watchedMovies:e}).then((function(){"#ua"===window.location.hash?t(i).Notify.success("Успішно видалено"):t(i).Notify.success("Removed successfully"),A()}));case 7:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function A(){H.classList.add("is-hidden"),window.removeEventListener("keydown",F),T.removeEventListener("click",A),H.removeEventListener("click",C),q?q.removeEventListener("click",z):M.removeEventListener("click",G)}function F(a){"Escape"===a.code&&A()}function C(a){a.target===a.currentTarget&&A()}f.addEventListener("click",(function(a){return j.apply(this,arguments)})),d("lmGBS"),d("4Pgmh"),d("7Y4Kf")}();
//# sourceMappingURL=library.36a9e522.js.map
