!function(){function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},n={},r=e.parcelRequired7c6;null==r&&((r=function(t){if(t in a)return a[t].exports;if(t in n){var e=n[t];delete n[t];var r={id:t,exports:{}};return a[t]=r,e.call(r.exports,r,r.exports),r.exports}var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}).register=function(t,e){n[t]=e},e.parcelRequired7c6=r),r("euqRf"),r("7eZkt"),r("ajO7K");var c,d=r("bpxeT"),o=r("2TvXO"),s=r("6m2hf"),l=r("iU1Pc"),i=r("gQOBw"),u=r("euqRf"),m=r("8ptzx"),_=document.querySelector(".watched-btn"),p=document.querySelector(".queue-btn"),v=document.querySelector(".gallery");function b(){return f.apply(this,arguments)}function f(){return(f=t(d)(t(o).mark((function e(){return t(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.auth.currentUser){e.next=3;break}return t(l).Notify.failure("Please sign in"),e.abrupt("return");case 3:c="watched",_.classList.add("watched-btn_current"),p.classList.remove("queue-btn_current"),v.innerHTML="",g();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=t(d)(t(o).mark((function e(){return t(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.auth.currentUser){e.next=3;break}return t(l).Notify.failure("Please sign in"),e.abrupt("return");case 3:c="queue",_.classList.remove("watched-btn_current"),p.classList.add("queue-btn_current"),v.innerHTML="",w();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){(0,s.onSnapshot)((0,s.doc)(u.db,"users",u.auth.currentUser.uid),(function(t){var e,a=t.data().watchedMovies;console.log(a),e="#ua"===window.location.hash?a.ua.map(m.createMarkupElemetsGallery).join(""):a.en.map(m.createMarkupElemetsGallery).join(""),v.innerHTML=e}))}function w(){(0,s.onSnapshot)((0,s.doc)(u.db,"users",u.auth.currentUser.uid),(function(t){var e,a=t.data().queuedMovies;console.log(a),e="#ua"===window.location.hash?a.ua.map(m.createMarkupElemetsGallery).join(""):a.en.map(m.createMarkupElemetsGallery).join(""),v.innerHTML=e}))}_.addEventListener("click",b),p.addEventListener("click",(function(){return h.apply(this,arguments)})),(0,i.onAuthStateChanged)(u.auth,(function(t){t?(console.log("user logged in: ",t),u.authSignOut.parentElement.classList.remove("visually-hidden"),u.authFormOpen.parentElement.classList.add("visually-hidden"),b()):(console.log("user logged out"),u.authSignOut.parentElement.classList.add("visually-hidden"),u.authFormOpen.parentElement.classList.remove("visually-hidden"))}));var y,L,x,k;d=r("bpxeT"),o=r("2TvXO"),u=r("euqRf"),s=r("6m2hf"),l=r("iU1Pc");function q(t){var e=t.title,a=t.poster_path,n=t.genres,r=t.vote_average,c=t.vote_count,d=t.popularity,o=t.original_title,s=t.overview,l=n.map((function(t){return t.name})).join(", ");return'\n      <div class="modal">\n          <div class="modal-card">\n              <button class="modal__btn-close" data-modal-close>\n              <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"\n              class="modal__icon-close"\n              width="24" height="24"\n              viewBox="0 0 24 24">\n              <path d="M 4.7070312 3.2929688 L 3.2929688 4.7070312 L 10.585938 12 L 3.2929688 19.292969 L 4.7070312 20.707031 L 12 13.414062 L 19.292969 20.707031 L 20.707031 19.292969 L 13.414062 12 L 20.707031 4.7070312 L 19.292969 3.2929688 L 12 10.585938 L 4.7070312 3.2929688 z"></path>\n              </svg>\n              </button>\n              <div class="modal-card__images">\n                  <img\n                  class="modal-card__image"\n                  src="https://image.tmdb.org/t/p/w1280/'.concat(a,'"\n                  alt="Title"\n                  />\n              </div>\n              <div class="modal-card__description">\n                  <h2 class="modal-card__title">').concat(e,'</h2>\n                  <table class="modal-card__table">\n                  <tbody>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Vote / Votes</td>\n                      <td class="modal-card__table-data"><span>').concat(r,"</span> / ").concat(c,'</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Popularity</td>\n                      <td class="modal-card__table-data">').concat(d,'</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Original Title</td>\n                      <td class="modal-card__table-data">').concat(o,'</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Genre</td>\n                      <td class="modal-card__table-data">').concat(l,'</td>\n                      </tr>\n                  </tbody>\n                  </table>\n                  <p class="modal-card__about lng-about">About</p>\n                  <p class="modal-card__about-description">').concat(s,'</p>\n                  <div class="modal-card__btn">\n                    <button class="modal-card__btn-watched lng-watched modal-card__btn-watched_active" data-watched-remove>remove from watched</button>\n                </div>\n              </div>\n          </div>\n      </div>\n  ')}function E(t){var e=t.title,a=t.poster_path,n=t.genres,r=t.vote_average,c=t.vote_count,d=t.popularity,o=t.original_title,s=t.overview,l=n.map((function(t){return t.name})).join(", ");return'\n      <div class="modal">\n          <div class="modal-card">\n              <button class="modal__btn-close" data-modal-close>\n              <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"\n              class="modal__icon-close"\n              width="24" height="24"\n              viewBox="0 0 24 24">\n              <path d="M 4.7070312 3.2929688 L 3.2929688 4.7070312 L 10.585938 12 L 3.2929688 19.292969 L 4.7070312 20.707031 L 12 13.414062 L 19.292969 20.707031 L 20.707031 19.292969 L 13.414062 12 L 20.707031 4.7070312 L 19.292969 3.2929688 L 12 10.585938 L 4.7070312 3.2929688 z"></path>\n              </svg>\n              </button>\n              <div class="modal-card__images">\n                  <img\n                  class="modal-card__image"\n                  src="https://image.tmdb.org/t/p/w1280/'.concat(a,'"\n                  alt="Title"\n                  />\n              </div>\n              <div class="modal-card__description">\n                  <h2 class="modal-card__title">').concat(e,'</h2>\n                  <table class="modal-card__table">\n                  <tbody>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Vote / Votes</td>\n                      <td class="modal-card__table-data"><span>').concat(r,"</span> / ").concat(c,'</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Popularity</td>\n                      <td class="modal-card__table-data">').concat(d,'</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Original Title</td>\n                      <td class="modal-card__table-data">').concat(o,'</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Genre</td>\n                      <td class="modal-card__table-data">').concat(l,'</td>\n                      </tr>\n                  </tbody>\n                  </table>\n                  <p class="modal-card__about lng-about">About</p>\n                  <p class="modal-card__about-description">').concat(s,'</p>\n                  <div class="modal-card__btn">\n                    <button class="modal-card__btn-queue lng-queue modal-card__btn-queue_active" data-queue-remove>remove from queue</button>\n                </div>\n              </div>\n          </div>\n      </div>\n  ')}var M=document.querySelector(".backdrop"),T=document.querySelector("[data-modal]");function S(){return(S=t(d)(t(o).mark((function e(a){var n,r,d,i;return t(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.target!==a.currentTarget){e.next=2;break}return e.abrupt("return");case 2:if(n=a.target.closest(".photo-card"),r=Number(n.dataset.id),"watched"!==c){e.next=21;break}return e.prev=5,e.next=8,(0,s.getDoc)((0,s.doc)(u.db,"users",u.auth.currentUser.uid)).then((function(t){return t.data()}));case 8:d=e.sent.watchedMovies,k="#ua"===window.location.hash?d.ua.find((function(t){return t.id===r})):d.en.find((function(t){return t.id===r})),console.log(k),U(k),T.innerHTML=q(k),O(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),t(l).Notify.failure(e.t0.message);case 19:e.next=35;break;case 21:return e.prev=21,e.next=24,(0,s.getDoc)((0,s.doc)(u.db,"users",u.auth.currentUser.uid)).then((function(t){return t.data()}));case 24:i=e.sent.queuedMovies,k="#ua"===window.location.hash?i.ua.find((function(t){return t.id===r})):i.en.find((function(t){return t.id===r})),console.log(k),U(k),T.innerHTML=E(k),N(),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(21),t(l).Notify.failure(e.t1.message);case 35:(x=document.querySelector("[data-modal-close]")).addEventListener("click",G),M.addEventListener("click",z),window.addEventListener("keydown",H),T.classList.remove("is-hidden");case 40:case"end":return e.stop()}}),e,null,[[5,16],[21,32]])})))).apply(this,arguments)}function U(t){M.style.backgroundImage='url("https://image.tmdb.org/t/p/original/'.concat(t.backdrop_path),M.style.backgroundSize="cover",M.style.backgroundPosition="50% 50%"}function O(){(y=document.querySelector("[data-watched-remove]")).addEventListener("click",P)}function N(){(L=document.querySelector("[data-queue-remove]")).addEventListener("click",D)}function D(){return j.apply(this,arguments)}function j(){return(j=t(d)(t(o).mark((function e(){var a;return t(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.getDoc)((0,s.doc)(u.db,"users",u.auth.currentUser.uid)).then((function(t){return t.data()}));case 2:return(a=e.sent.queuedMovies).ua=a.ua.filter((function(t){return t.id!==k.id})),a.en=a.en.filter((function(t){return t.id!==k.id})),e.next=7,(0,s.updateDoc)((0,s.doc)(u.db,"users",u.auth.currentUser.uid),{queuedMovies:a}).then((function(){"#ua"===window.location.hash?t(l).Notify.success("Успішно видалено"):t(l).Notify.success("Removed successfully"),G()}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return R.apply(this,arguments)}function R(){return(R=t(d)(t(o).mark((function e(){var a;return t(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.getDoc)((0,s.doc)(u.db,"users",u.auth.currentUser.uid)).then((function(t){return t.data()}));case 2:return(a=e.sent.watchedMovies).ua=a.ua.filter((function(t){return t.id!==k.id})),a.en=a.en.filter((function(t){return t.id!==k.id})),e.next=7,(0,s.updateDoc)((0,s.doc)(u.db,"users",u.auth.currentUser.uid),{watchedMovies:a}).then((function(){"#ua"===window.location.hash?t(l).Notify.success("Успішно видалено"):t(l).Notify.success("Removed successfully"),G()}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){M.classList.add("is-hidden"),window.removeEventListener("keydown",H),x.removeEventListener("click",G),M.removeEventListener("click",z),y?y.removeEventListener("click",P):L.removeEventListener("click",D)}function H(t){"Escape"===t.code&&G()}function z(t){t.target===t.currentTarget&&G()}v.addEventListener("click",(function(t){return S.apply(this,arguments)}))}();
//# sourceMappingURL=library.8f54ca96.js.map
