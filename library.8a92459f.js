function a(a){return a&&a.__esModule?a.default:a}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},d={},n=e.parcelRequired7c6;null==n&&((n=function(a){if(a in t)return t[a].exports;if(a in d){var e=d[a];delete d[a];var n={id:a,exports:{}};return t[a]=n,e.call(n.exports,n,n.exports),n.exports}var o=new Error("Cannot find module '"+a+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(a,e){d[a]=e},e.parcelRequired7c6=n),n("jw9fa"),n("bMZn5"),n("k601f");var o=n("ftYLF"),l=n("eWCmQ"),s=n("eyjy7"),r=n("bMZn5"),c=n("4iZdw"),i=n("krGWQ");const u=document.querySelector(".watched-btn"),m=document.querySelector(".queue-btn"),_=document.querySelector(".gallery");let b;async function v(){r.auth.currentUser?(b="watched",u.classList.add("watched-btn_current"),m.classList.remove("queue-btn_current"),_.innerHTML="",(0,o.onSnapshot)((0,o.doc)(r.db,"users",r.auth.currentUser.uid),(a=>{const{watchedMovies:e}=a.data();let t;console.log(e),t="#ua"===window.location.hash?e.ua.map(c.createMarkupElemetsGallery).join(""):e.en.map(c.createMarkupElemetsGallery).join(""),_.innerHTML=t}))):"#ua"===window.location.hash?a(l).Notify.failure("Будь ласка, авторизуйтесь"):a(l).Notify.failure("Please sign in")}u.addEventListener("click",v),m.addEventListener("click",(async function(){if(!r.auth.currentUser)return void("#ua"===window.location.hash?a(l).Notify.failure("Будь ласка, авторизуйтесь"):a(l).Notify.failure("Please sign in"));b="queue",u.classList.remove("watched-btn_current"),m.classList.add("queue-btn_current"),_.innerHTML="",(0,o.onSnapshot)((0,o.doc)(r.db,"users",r.auth.currentUser.uid),(a=>{const{queuedMovies:e}=a.data();let t;console.log(e),t="#ua"===window.location.hash?e.ua.map(c.createMarkupElemetsGallery).join(""):e.en.map(c.createMarkupElemetsGallery).join(""),_.innerHTML=t}))})),(0,s.onAuthStateChanged)(r.auth,(a=>{a?(console.log("user logged in: ",a),r.authSignOut.parentElement.classList.remove("visually-hidden"),r.authFormOpen.parentElement.classList.add("visually-hidden"),v()):(console.log("user logged out"),r.authSignOut.parentElement.classList.add("visually-hidden"),r.authFormOpen.parentElement.classList.remove("visually-hidden")),i.refs.siteNav.classList.remove("visually-hidden")}));r=n("bMZn5"),o=n("ftYLF"),l=n("eWCmQ");function h(a){const{title:e,poster_path:t,genres:d,vote_average:n,vote_count:o,popularity:l,original_title:s,overview:r}=a;return`\n      <div class="modal">\n          <div class="modal-card">\n              <button class="modal__btn-close" data-modal-close>\n              <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"\n              class="modal__icon-close"\n              width="24" height="24"\n              viewBox="0 0 24 24">\n              <path d="M 4.7070312 3.2929688 L 3.2929688 4.7070312 L 10.585938 12 L 3.2929688 19.292969 L 4.7070312 20.707031 L 12 13.414062 L 19.292969 20.707031 L 20.707031 19.292969 L 13.414062 12 L 20.707031 4.7070312 L 19.292969 3.2929688 L 12 10.585938 L 4.7070312 3.2929688 z"></path>\n              </svg>\n              </button>\n              <div class="modal-card__images">\n                  <img\n                  class="modal-card__image"\n                  src="https://image.tmdb.org/t/p/w1280/${t}"\n                  alt="Title"\n                  />\n              </div>\n              <div class="modal-card__description">\n                  <h2 class="modal-card__title">${e}</h2>\n                  <table class="modal-card__table">\n                  <tbody>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Vote / Votes</td>\n                      <td class="modal-card__table-data"><span>${n}</span> / ${o}</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Popularity</td>\n                      <td class="modal-card__table-data">${l}</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Original Title</td>\n                      <td class="modal-card__table-data">${s}</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Genre</td>\n                      <td class="modal-card__table-data">${d.map((a=>a.name)).join(", ")}</td>\n                      </tr>\n                  </tbody>\n                  </table>\n                  <p class="modal-card__about lng-about">About</p>\n                  <p class="modal-card__about-description">${r}</p>\n                  <div class="modal-card__btn">\n                    <button class="modal-card__btn-watched lng-removewatched modal-card__btn-watched_active" data-watched-remove>remove from watched</button>\n                </div>\n              </div>\n          </div>\n      </div>\n  `}function g(a){const{title:e,poster_path:t,genres:d,vote_average:n,vote_count:o,popularity:l,original_title:s,overview:r}=a;return`\n      <div class="modal">\n          <div class="modal-card">\n              <button class="modal__btn-close" data-modal-close>\n              <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"\n              class="modal__icon-close"\n              width="24" height="24"\n              viewBox="0 0 24 24">\n              <path d="M 4.7070312 3.2929688 L 3.2929688 4.7070312 L 10.585938 12 L 3.2929688 19.292969 L 4.7070312 20.707031 L 12 13.414062 L 19.292969 20.707031 L 20.707031 19.292969 L 13.414062 12 L 20.707031 4.7070312 L 19.292969 3.2929688 L 12 10.585938 L 4.7070312 3.2929688 z"></path>\n              </svg>\n              </button>\n              <div class="modal-card__images">\n                  <img\n                  class="modal-card__image"\n                  src="https://image.tmdb.org/t/p/w1280/${t}"\n                  alt="Title"\n                  />\n              </div>\n              <div class="modal-card__description">\n                  <h2 class="modal-card__title">${e}</h2>\n                  <table class="modal-card__table">\n                  <tbody>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Vote / Votes</td>\n                      <td class="modal-card__table-data"><span>${n}</span> / ${o}</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Popularity</td>\n                      <td class="modal-card__table-data">${l}</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Original Title</td>\n                      <td class="modal-card__table-data">${s}</td>\n                      </tr>\n                      <tr class="modal-card__table-row">\n                      <td class="modal-card__table-data modal-card__table-data--grey">Genre</td>\n                      <td class="modal-card__table-data">${d.map((a=>a.name)).join(", ")}</td>\n                      </tr>\n                  </tbody>\n                  </table>\n                  <p class="modal-card__about lng-about">About</p>\n                  <p class="modal-card__about-description">${r}</p>\n                  <div class="modal-card__btn">\n                    <button class="modal-card__btn-queue lng-removequeued modal-card__btn-queue_active" data-queue-remove>remove from queue</button>\n                </div>\n              </div>\n          </div>\n      </div>\n  `}var p=n("k601f");let w,y,f,L;const k=document.querySelector(".backdrop"),M=document.querySelector("[data-modal]");function q(a){k.style.backgroundImage=`url("https://image.tmdb.org/t/p/original/${a.backdrop_path}`,k.style.backgroundSize="cover",k.style.backgroundPosition="50% 50%"}async function E(){const{queuedMovies:e}=await(0,o.getDoc)((0,o.doc)(r.db,"users",r.auth.currentUser.uid)).then((a=>a.data()));e.ua=e.ua.filter((a=>a.id!==L.id)),e.en=e.en.filter((a=>a.id!==L.id)),await(0,o.updateDoc)((0,o.doc)(r.db,"users",r.auth.currentUser.uid),{queuedMovies:e}).then((()=>{"#ua"===window.location.hash?a(l).Notify.success("Успішно видалено"):a(l).Notify.success("Removed successfully"),x()}))}async function $(){const{watchedMovies:e}=await(0,o.getDoc)((0,o.doc)(r.db,"users",r.auth.currentUser.uid)).then((a=>a.data()));e.ua=e.ua.filter((a=>a.id!==L.id)),e.en=e.en.filter((a=>a.id!==L.id)),await(0,o.updateDoc)((0,o.doc)(r.db,"users",r.auth.currentUser.uid),{watchedMovies:e}).then((()=>{"#ua"===window.location.hash?a(l).Notify.success("Успішно видалено"):a(l).Notify.success("Removed successfully"),x()}))}function x(){k.classList.add("is-hidden"),window.removeEventListener("keydown",T),f.removeEventListener("click",x),k.removeEventListener("click",N),w?w.removeEventListener("click",$):y.removeEventListener("click",E)}function T(a){"Escape"===a.code&&x()}function N(a){a.target===a.currentTarget&&x()}_.addEventListener("click",(async function(e){if(e.target===e.currentTarget)return;const t=e.target.closest(".photo-card"),d=Number(t.dataset.id);if("watched"===b)try{const{watchedMovies:a}=await(0,o.getDoc)((0,o.doc)(r.db,"users",r.auth.currentUser.uid)).then((a=>a.data()));L="#ua"===window.location.hash?a.ua.find((a=>a.id===d)):a.en.find((a=>a.id===d)),console.log(L),q(L),M.innerHTML=h(L),w=document.querySelector("[data-watched-remove]"),w.addEventListener("click",$)}catch(e){a(l).Notify.failure(e.message)}else try{const{queuedMovies:a}=await(0,o.getDoc)((0,o.doc)(r.db,"users",r.auth.currentUser.uid)).then((a=>a.data()));L="#ua"===window.location.hash?a.ua.find((a=>a.id===d)):a.en.find((a=>a.id===d)),console.log(L),q(L),M.innerHTML=g(L),y=document.querySelector("[data-queue-remove]"),y.addEventListener("click",E)}catch(e){a(l).Notify.failure(e.message)}(0,p.changeLanguage)(),f=document.querySelector("[data-modal-close]"),f.addEventListener("click",x),k.addEventListener("click",N),window.addEventListener("keydown",T),M.classList.remove("is-hidden")}));
//# sourceMappingURL=library.8a92459f.js.map
